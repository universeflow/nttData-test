@startuml
title Api-Test - Ntt-Data

skinparam roundcorner 20
skinparam BoxPadding 5
skinparam SequenceBoxBackgroundColor AliceBlue
box "\n/SignUp\n\n"
                actor User
                participant "Controller" as Controller
                participant "UsuarioRequestDto" as RequestDto
                participant "Service" as Service
                participant "UsuarioResponseDto" as ResponseDto
                participant "Mapper" as Mapper
                participant "Repository" as Repository
                participant "UsuarioEntity" as Entity
                participant "JwtService" as jwt

                activate Controller
                activate User
                User -> Controller: POST /auth/signup
                Controller -> RequestDto++: validar campos requeridos
                alt Campos v치lidos
                    RequestDto -> Service++: signup(UsuarioRequestDto)
                else Campos inv치lidos
                    RequestDto -> Controller: Error de validaci칩n
                    Controller -> User: Error de validaci칩n
                    deactivate User
                    deactivate RequestDto
                end

                alt Busqueda de usuario Response 200
                    Service -> Repository++: findByCorreo(correo)
                    Repository -> Service :  / devuelve usuario existente
                else Excepcion
                    Repository -> Service :  / Usuario no encontrado
                    deactivate Repository
                    Service -> Controller :  Usuario no encontrado
                    Controller -> User : Usuario no encontrado
                    deactivate User
                end
                deactivate "Controller"
                Service -> Entity++ : / crear Instancia Usuario entity\n con informacion Request
                Entity -> "Service"-- :  Retorna instancia usuario entity
                deactivate Entity

                Service -> Service : Valida si los telefonos del request no son vacios
                Service -> jwt ++ : genera Token de seguridad
                jwt -> Service -- : Retorna token
                Service -> "Repository" ++ : guarda usuario
                "Repository" -> Service  --: /Retorna usuario guardado

                Service -> "ResponseDto" ++ : genera usuario UsuarioResponseDto
                "ResponseDto" -> "Service" -- : Retorna UsuarioResponseDto
                Service -> Controller++  : Retorna usuario creado
                Controller -> User ++ : Retorna usuario creado

 end box

@enduml